<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>The Module Autoloader - laminas-modulemanager</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">

        <script src="../js/jquery-1.10.2.min.js" defer></script>
        <script src="../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">laminas-modulemanager</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href=".." class="nav-link">Home</a>
                            </li>
                            <li class="navitem">
                                <a href="../intro/" class="nav-link">Introduction</a>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Reference <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../module-manager/" class="dropdown-item">The Module Manager</a>
</li>
                                    
<li>
    <a href="../module-class/" class="dropdown-item">The Module Class</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active">The Module Autoloader</a>
</li>
                                    
<li>
    <a href="../best-practices/" class="dropdown-item">Best Practices when Creating Modules</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../module-class/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../best-practices/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="https://github.com/laminas/laminas-modulemanager/edit/master/docs/module-autoloader.md" class="nav-link"><i class="fa fa-github"></i> Edit on GitHub</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#the-module-autoloader" class="nav-link">The Module Autoloader</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#module-autoloader-usage" class="nav-link">Module Autoloader Usage</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#non-standard-explicit-module-paths" class="nav-link">Non-Standard / Explicit Module Paths</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#packaging-modules-with-phar" class="nav-link">Packaging Modules with Phar</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="the-module-autoloader">The Module Autoloader</h1>
<p>laminas-modulemanager ships with the default module autoloader
<code>Laminas\Loader\ModuleAutoloader</code>. It is a specialized autoloader responsible for
locating and on-demand loading of, the <code>Module</code> classes from a variety of
sources.</p>
<h2 id="module-autoloader-usage">Module Autoloader Usage</h2>
<p>By default, the provided <code>Laminas\ModuleManager\Listener\DefaultListenerAggregate</code>
sets up the <code>ModuleAutoloader</code>; as a developer, you need only provide an array
of module paths, either absolute or relative to the application's root, for the
<code>ModuleAutoloader</code> to check when loading modules. The <code>DefaultListenerAggregate</code>
will take care of instantiating and registering the <code>ModuleAutoloader</code> for you.</p>
<blockquote>
<h3 id="must-be-in-application-root">Must be in application root</h3>
<p>In order for paths relative to your application directory to work, you must
have the directive <code>chdir(dirname(__DIR__));</code> in your <code>public/index.php</code> file.</p>
</blockquote>
<h3 id="registering-module-paths-with-the-defaultlisteneraggregate">Registering module paths with the <code>DefaultListenerAggregate</code></h3>
<p>The following example will search for modules in three different <code>module_paths</code>.
Two are local directories of this application and the third is a system-wide
shared directory.</p>
<pre><code class="php">// public/index.php
use Laminas\ModuleManager\Listener;
use Laminas\ModuleManager\ModuleManager;

chdir(dirname(__DIR__));

// Instantiate and configure the default listener aggregate
$listenerOptions = new Listener\ListenerOptions([
    'module_paths' =&gt; [
        './module',
        './vendor',
        '/usr/share/laminasmodules',
    ]
]);
$defaultListeners = new Listener\DefaultListenerAggregate($listenerOptions);

// Instantiate the module manager
$moduleManager = new ModuleManager([
    'Application',
    'FooModule',
    'BarModule',
]);

// Attach the default listener aggregate and load the modules
$moduleManager-&gt;getEventManager()-&gt;attachAggregate($defaultListeners);
$moduleManager-&gt;loadModules();
</code></pre>

<blockquote>
<h3 id="module-paths-are-fifo">Module paths are FIFO</h3>
<p>Module paths behave very similar to PHP's <code>include_path</code> and are searched in
the order they are defined. If you have modules with the same name in more
than one registered module path, the module autoloader will return the first
one it finds.</p>
<h3 id="disabling-the-moduleautoloader">Disabling the ModuleAutoloader</h3>
<ul>
<li>Since 2.8.0</li>
</ul>
<p>If you are using Composer to autoload, you may not need to use the
<code>ModuleAutoloader</code>. As such, you can disable it by passing the following
option to the <code>ListenerOptions</code> class:</p>
<p><code>php
'use_laminas_loader' =&gt; false,</code></p>
<p>If your project was begun from the <a href="https://github.com/laminas/laminas-mvc-skeleton">laminas-mvc-skeleton</a>,
place the above within the <code>module_listener_options</code> configuration of your
<code>config/application.config.php</code> file:</p>
<p><code>php
return [
    /* ... */
    'module_listener_options' =&gt; [
        'use_laminas_loader' =&gt; false,
        /* ... */
    ],
    /* ... */
];</code></p>
</blockquote>
<h2 id="non-standard-explicit-module-paths">Non-Standard / Explicit Module Paths</h2>
<p>Sometimes you may want to specify exactly where a module is instead of having
<code>Laminas\Loader\ModuleAutoloader</code> try to find it in the registered paths.</p>
<h3 id="registering-a-non-standard-explicit-module-path">Registering a Non-Standard / Explicit Module Path</h3>
<p>In this example, the autoloader will first check for <code>MyModule\Module</code> in
<code>/path/to/mymoduledir-v1.2/Module.php</code>. If it's not found, then it will fall
back to searching any other registered module paths.</p>
<pre><code class="php">// ./public/index.php
use Laminas\Loader\ModuleAutoloader;
use Laminas\ModuleManager\Listener;
use Laminas\ModuleManager\ModuleManager;

chdir(dirname(__DIR__));

// Instantiate and configure the default listener aggregate
$listenerOptions = new Listener\ListenerOptions([
    'module_paths' =&gt; [
        './module',
        './vendor',
        '/usr/share/laminasmodules',
        'MyModule' =&gt; '/path/to/mymoduledir-v1.2',
    ]
]);
$defaultListeners = new Listener\DefaultListenerAggregate($listenerOptions);

/**
 * Without DefaultListenerAggregate:
 *
 * $moduleAutoloader = new ModuleAutoloader([
 *     './module',
 *     './vendor',
 *     '/usr/share/laminasmodules',
 *     'MyModule' =&gt; '/path/to/mymoduledir-v1.2',
 * ]);
 * $moduleAutoloader-&gt;register();
 *
 */

// Instantiate the module manager
$moduleManager = new ModuleManager([
    'MyModule',
    'FooModule',
    'BarModule',
]);

// Attach the default listener aggregate and load the modules
$moduleManager-&gt;getEventManager()-&gt;attachAggregate($defaultListeners);
$moduleManager-&gt;loadModules();
</code></pre>

<p>This same method works if you provide the path to a phar archive.</p>
<h2 id="packaging-modules-with-phar">Packaging Modules with Phar</h2>
<p>If you prefer, you may easily package your module as a
<a href="http://php.net/phar">phar archive</a>. The module autoloader is able to autoload
modules in the following archive formats: .phar, .phar.gz, .phar.bz2, .phar.tar,
.phar.tar.gz, .phar.tar.bz2, .phar.zip, .tar, .tar.gz, .tar.bz2, and .zip.</p>
<p>Package your module by performing a tar the module directory. You can then
replace the <code>MyModule/</code> directory with <code>MyModule.tar</code>, and it should still be
autoloaded without any additional changes!</p>
<blockquote>
<h3 id="avoid-compression">Avoid compression</h3>
<p>If possible, avoid using any type of compression (bz2, gz, zip) on your phar
archives, as it introduces unnecessary CPU overhead to each request.</p>
</blockquote></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js" defer></script>
        <script src="../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <div class="table-responsive"><table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
